var i=Object.defineProperty;var a=(o,e,t)=>e in o?i(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var s=(o,e,t)=>(a(o,typeof e!="symbol"?e+"":e,t),t);import{A as c}from"./AbstractApiService.js";import{V as h}from"./VerifyTokenService.js";import{u}from"./index.js";class p extends c{constructor(){super("/auth");s(this,"authStore");s(this,"verifyToken");this.authStore=u(),this.verifyToken=new h}login(e,t){return this.http.post("login",{email:e,password:t}).then(async n=>{this.message.success("Vous \xEAtes connect\xE9");const r=this.handleResponse(n);if(!r.data.access_token)throw new Error("Token not found in response");return this.setHeaderToken(r.data.access_token),await this.verifyToken.verifyToken(),r}).catch(this.handleError.bind(this))}logout(){return this.http.post("logout").then(e=>{localStorage.removeItem("jwt_token"),window.location.reload()}).catch(e=>{console.log({err:e})})}}function v(){return new p}export{v as u};
