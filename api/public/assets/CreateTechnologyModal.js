import{A as y}from"./AbstractApiService.js";import{e as E,A as T,l as d,F as k,o as h,c as p,w as o,f as v,u as t,s as w,t as R,v as g,p as j,x as C,z as b}from"./vendor.js";class S extends y{constructor(){super("/technologies")}get(){return this.http.get("").then(this.handleResponse.bind(this)).catch(this.handleError.bind(this))}store(e){return this.http.post("",e).then(this.handleResponse.bind(this)).catch(this.handleError.bind(this))}update(e,i){return this.http.put("/"+e,i).then(this.handleResponse.bind(this)).catch(this.handleError.bind(this))}delete(e){return this.http.delete("/"+e).then(this.handleResponse.bind(this)).catch(this.handleError.bind(this))}}function M(){return new S}const B=b("Modifier"),F=b("Ajouter"),D=E({props:{init:null},emits:["created","updated"],setup(f,{emit:e}){const i=f,l=M(),m=T(),c=d(null),_={name:[{required:!0,message:"Le nom est requis",trigger:["input","blur"]}]},s=d({id:void 0,name:""}),u=d(!1);k(()=>{i.init!=null&&i.init!=null&&(u.value=!0,s.value=i.init)});const x=r=>{r.preventDefault(),c.value.validate(async n=>{if(!n){const a=await l.store(s.value);m.success("Technologie ajout\xE9e avec succ\xE8s"),e("created",{value:a.data.id,label:a.data.name})}})},A=r=>{r.preventDefault(),c.value.validate(async n=>{n||(await l.update(s.value.id,s.value),m.success("Technologie modifi\xE9e avec succ\xE8s"),e("updated"))})};return(r,n)=>(h(),p(t(C),{title:u.value?"Modifier une technologie":"Ajouter une technologie",class:"w-1/2"},{default:o(()=>[v(t(j),{model:s.value,ref:(a,N)=>{N.formRef=a,c.value=a},rules:_},{default:o(()=>[v(t(w),{path:"name",label:"Nom de la technologie"},{default:o(()=>[v(t(R),{value:s.value.name,"onUpdate:value":n[0]||(n[0]=a=>s.value.name=a),placeholder:"Nom de la technologie"},null,8,["value"])]),_:1}),u.value?(h(),p(t(g),{key:0,type:"success",onClick:A,loading:t(l).isLoading.value},{default:o(()=>[B]),_:1},8,["loading"])):(h(),p(t(g),{key:1,type:"success",onClick:x,loading:t(l).isLoading.value},{default:o(()=>[F]),_:1},8,["loading"]))]),_:1},8,["model"])]),_:1},8,["title"]))}});export{D as _,M as u};
