import{u as m,r as _}from"./index.js";import{e as g,o as b,n as S,f as o,u as e,C as N,D as s,r as t,E as A,A as B,B as L,F as j,m as C,c as E,w as a,G as M,y as r,H as k,v as I,I as h,J as P,K as V,z as y}from"./vendor.js";import{u as F}from"./AuthApiService.js";import"./AbstractApiService.js";import"./VerifyTokenService.js";const T=g({setup(v){const l=m(),c=[{label:()=>s(t("router-link"),{to:{name:"auth.profile"}},{default:()=>"Mon profil"}),key:"profile"},{label:()=>s(t("router-link"),{to:{name:"auth.admin.users"}},{default:()=>"Utilisateurs"}),key:"users",roles:["admin"]},{label:()=>s(t("router-link"),{to:{name:"auth.admin.students"}},{default:()=>"\xC9tudiants"}),key:"students",roles:["admin"]},{label:()=>s(t("router-link"),{to:{name:"auth.admin.professors"}},{default:()=>"Professeurs"}),key:"professors",roles:["admin"]},{label:()=>s(t("router-link"),{to:{name:"auth.admin.companies"}},{default:()=>"Entreprises"}),key:"companies",roles:["admin"]},{label:()=>s(t("router-link"),{to:{name:"auth.admin.technologies"}},{default:()=>"Technologies"}),key:"technologies",roles:["admin"]},{label:()=>s(t("router-link"),{to:{name:"auth.students.internship"}},{default:()=>"Mon stage"}),key:"internship",roles:["student"]},{label:()=>s(t("router-link"),{to:{name:"auth.students.invitations"}},{default:()=>"Invitations"}),key:"invitations",roles:["student"]},{label:()=>s(t("router-link"),{to:{name:"auth.professor.internships"}},{default:()=>"Les stages"}),key:"professor.internships",roles:["professor"]},{label:()=>s(t("router-link"),{to:{name:"auth.about"}},{default:()=>"\xC0 propos"}),key:"about"}],i=u=>u.filter(n=>"roles"in n&&Array.isArray(n.roles)?n.roles.includes(l.role):!0);return(u,n)=>(b(),S("div",null,[o(e(N),{options:i(c)},null,8,["options"])]))}}),D={class:"flex justify-between items-center px-6 h-full"},H=r("h2",{class:"text-xl font-black m-0 text-black no-underline"},"PFE Insight",-1),R={class:"flex items-center gap-5"},U={class:"h-8 w-8 bg-gray-50 relative rounded-full overflow-hidden"},z=["src"],G={class:"inline-block"},J=y(" Se d\xE9connecter "),K={class:"container mx-auto"},O=y(" Powered by NaiveUI "),Y=g({setup(v){const l=m(),c=A(),i=F(),u=B(),n=L();j(()=>{l.first_name||C().push({name:"login"}),_.beforeEach((d,f,p)=>{f.name&&(n.start(),console.log("stat loading bar")),p()}),_.afterEach((d,f)=>{n.finish()})});const x=()=>{i.logout().then(d=>{u.success("logged out")})};return(d,f)=>{const p=t("router-link"),w=t("router-view");return b(),E(e(h),{style:{height:"100vh"}},{default:a(()=>[o(e(M),{style:{height:"64px"},bordered:""},{default:a(()=>[r("div",D,[r("div",null,[o(p,{to:{name:"auth.dashboard"}},{default:a(()=>[H]),_:1},8,["to"])]),r("div",R,[r("div",U,[r("img",{src:e(l).profile_picture,class:"absolute top-0 left-0 h-full w-full object-cover"},null,8,z)]),r("span",G,k(e(l).first_name)+" "+k(e(l).last_name),1),o(e(I),{type:"error",loading:e(i).isLoading.value,onClick:x},{default:a(()=>[J]),_:1},8,["loading"])])])]),_:1}),o(e(h),{position:"absolute",style:{top:"64px",bottom:"64px"},"has-sider":""},{default:a(()=>[o(e(P),{"content-style":"padding: 24px;","collapse-mode":"transform","collapsed-width":20,"show-trigger":"arrow-circle","native-scrollbar":!1,bordered:""},{default:a(()=>[o(T)]),_:1}),o(e(h),{"content-style":"padding: 24px;","native-scrollbar":!1,class:"bg-gray-50"},{default:a(()=>[r("main",K,[o(w,{key:e(c).fullPath})])]),_:1})]),_:1}),o(e(V),{position:"absolute",style:{height:"64px",padding:"24px"},bordered:""},{default:a(()=>[O]),_:1})]),_:1})}}});export{Y as default};
