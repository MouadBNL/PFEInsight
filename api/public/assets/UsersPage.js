import{u as f,U as _}from"./UserApiService.js";import{u as v}from"./index.js";import{e as x,A as g,U as y,l as A,F as k,r as h,o as C,n as E,y as N,f as s,u as a,R as S,w as i,x as U,T as b,v as n,V as j,z as u,D as V}from"./vendor.js";import"./AbstractApiService.js";const B={class:"flex items-center justify-between"},P=u("Tous les utilisateurs"),T=u("Ajouter un utilisateur"),M=x({setup(F){const l=g(),o=f(),d=y(),c=v(),m=[{title:"#",key:"id"},{title:"Pr\xE9nom",key:"first_name",sorter:"default"},{title:"Nom",key:"last_name",sorter:"default"},{title:"Email",key:"email",sorter:"default"},{title:"Role",key:"role",defaultFilterOptionValues:["Administrateur","Professeur","\xC9tudiant"],filterOptions:[{label:"Administrateur",value:"Administrateur"},{label:"Professeur",value:"Professeur"},{label:"\xC9tudiant",value:"\xC9tudiant"}],filter(e,t){return~t.role.indexOf(e)}},{title:"Actions",key:"actions",render(e){return c.id!=e.id?V(n,{type:"error",onClick:()=>{d.warning({title:"suppression d 'un utilisateur",positiveText:"Oui",content:"Vous \xEAtes sur le point de supprimer un utilisateur, \xEAtes-vous s\xFBr de vouloir continuer?",onPositiveClick:async()=>{try{await o.delete(e.id),l.success("Utilisateur: "+e.first_name+" "+e.last_name+" a \xE9t\xE9 supprim\xE9"),r.value=r.value.filter(t=>t.id!=e.id)}catch(t){console.log(t)}}})}},{default:()=>"supprimer"}):""}}],r=A([]);return k(async()=>{let e=await o.index();r.value=e.data.map(t=>_.formatUser(t)),console.log(e.data)}),(e,t)=>{const p=h("router-link");return C(),E(b,null,[N("div",B,[s(a(S),null,{default:i(()=>[P]),_:1}),s(p,{to:{name:"auth.admin.users.create"}},{default:i(()=>[s(a(n),{type:"success"},{default:i(()=>[T]),_:1})]),_:1},8,["to"])]),s(a(U),null,{default:i(()=>[s(a(j),{columns:m,data:r.value,pagination:{pageSize:20},loading:a(o).isLoading.value},null,8,["data","loading"])]),_:1})],64)}}});export{M as default};
