import{_ as f}from"./StudentSmallCard.js";import{u as m}from"./InternshipApiService.js";import{u as x}from"./index.js";import{e as y,A as _,l as g,F as h,o as k,n as E,f as i,u as r,R as b,w as o,x as A,T as S,V as C,z as V,D as s,v as l,r as j}from"./vendor.js";import"./AbstractApiService.js";const I=V("Tous les stages"),M=y({setup(N){const a=m(),u=_(),d=x(),n=g([]),c=(()=>[{title:"#",key:"id"},{title:"Etudiants",key:"students",render(e){return console.log(e.students),e.students.map(t=>s(f,{student:t}))}},{title:"Sujet",key:"title"},{title:"Encadrant",key:"supervisor_name"},{title:"Encadrant academique",key:"supervisor",filterOptions:[{label:"Sans Encadrant",value:null},{label:"Avec Encadrant",value:!0}],defaultFilterOptionValues:[null,!0],filter(e,t){return e==null?!t.supervisor||!t.supervisor.id:e==!0?!(!t.supervisor||!t.supervisor.id):!0},render(e){return!e.supervisor||!e.supervisor.id?s("div",{class:"text-center"},[s("span",{class:"text-gray-500 block"},["ce stage n'a pas de superviseur"]),s(l,{type:"success",class:"w-full",onClick(){p(e.id)}},{default:()=>"Encadrer ce stage"})]):e.supervisor.id==d.id?s("div",{class:"text-center"},[s("span",{class:"text-gray-500 block"},["vous \xEAtes le superviseur"]),s(l,{type:"error",class:"w-full",onClick(){v(e.id)}},{default:()=>"Abandonn\xE9"})]):s("div",{},[e.supervisor.first_name+" "+e.supervisor.last_name])}},{title:"Soutenance",key:"valid_soutenance",filterOptions:[{label:"Valide",value:"valid"},{label:"Invalide",value:"invalid"}],defaultFilterOptionValues:["valid","invalid"],filter(e,t){return t.valid_soutenance==(e==="valid")},render(e){return s("span",{class:"block text-center"},[e.valid_soutenance?"Valide":"Invalide"])}},{title:"Action",key:"actions",render(e){return s(j("router-link"),{to:{name:"auth.internship.show",params:{id:e.id}}},{default:()=>s(l,{type:"success"},{default:()=>"voir les d\xE9tails"})})}}])();h(async()=>{n.value=await(await a.index()).data,console.log(n.value)});const p=async e=>{try{await a.supervise(e),u.success("vous \xEAtes maintenant le superviseur du stage avec l'id: "+e)}finally{n.value=(await a.index()).data}},v=async e=>{try{await a.unsupervise(e),u.success("vous n'\xEAtes plus le superviseur du stage avec l'id: "+e)}finally{n.value=(await a.index()).data}};return(e,t)=>(k(),E(S,null,[i(r(b),null,{default:o(()=>[I]),_:1}),i(r(A),null,{default:o(()=>[i(r(C),{bordered:!0,"single-line":!1,columns:r(c),data:n.value,pagination:{pageSize:20},loading:r(a).isLoading.value},null,8,["columns","data","loading"])]),_:1})],64))}});export{M as default};
