import{u as B}from"./InternshipApiService.js";import{u as P}from"./index.js";import{_ as R}from"./StudentSmallCard.js";import{b as k}from"./AbstractApiService.js";import{e as T,l as b,F as D,o,n as r,f as a,w as s,y as l,u as e,_ as m,x as c,T as w,Y as S,c as p,R as F,z as i,H as n,a1 as H,a2 as I,v as u,a3 as U,a4 as q,S as N}from"./vendor.js";const z={key:0},L={class:"flex gap-4"},M={class:"w-2/3"},O={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Y=["href"],$=i("Presentation"),G={key:1},J=i("Presentation"),K=["href"],Q=i("Rapport non corrig\xE9e"),W={key:1},X=i("Rapport non corrig\xE9e"),Z=["href"],ee=i("Rapport corrig\xE9e"),te={key:1},se=i("Rapport corrig\xE9e"),ae={class:"w-1/3"},le={class:""},oe=i("D\xE9valider pour la soutenance"),ne=i("Valider pour la soutenance"),ie={class:"flex gap-4 flex-wrap xl:flex-nowrap"},re=l("span",{class:"text-gray-500"},"/20",-1),ce=i("Sauvegarder"),ue={class:"block text-base"},de={class:"block text-base"},_e={key:0},pe={class:"block"},ve={class:"block text-gray-400"},fe={key:1},he=l("span",{class:"block"},"Sans encadrant",-1),me=[he],ye={class:"text-base m-0 p-0"},ke={class:"text-gray-400"},xe={class:"block"},ge={class:"block text-gray-400"},Ce=T({props:{id:null},setup(E){const C=E,x=P(),v=B(),t=b(null),f=b(0);D(async()=>{await h()});const h=async()=>{var d;let g=C.id;t.value=(await v.get(g)).data,f.value=(d=t.value.score)!=null?d:0},V=async()=>{await v.valid(t.value.id),await h()},j=async()=>{await v.invalid(t.value.id),await h()},A=async()=>{await v.score(t.value.id,f.value),await h()};return(g,d)=>t.value?(o(),r("div",z,[a(e(c),{title:"Stage"},{default:s(()=>[l("div",L,[l("div",M,[a(e(m),{vertical:!0},{default:s(()=>[a(e(c),{title:"Etudiant"},{default:s(()=>[l("div",O,[(o(!0),r(w,null,S(t.value.students,(_,y)=>(o(),p(R,{key:y,student:_},null,8,["student"]))),128))])]),_:1}),a(e(c),null,{default:s(()=>[a(e(F),null,{default:s(()=>[i(n(t.value.title),1)]),_:1}),a(e(H),null,{default:s(()=>[i(n(t.value.description),1)]),_:1})]),_:1}),a(e(c),{title:"Technologies"},{default:s(()=>[a(e(m),null,{default:s(()=>[(o(!0),r(w,null,S(t.value.technologies,(_,y)=>(o(),p(e(I),{key:y},{default:s(()=>[i(n(_.name),1)]),_:2},1024))),128))]),_:1})]),_:1}),a(e(c),{title:"Fichier"},{default:s(()=>[a(e(m),null,{default:s(()=>[l("div",null,[t.value.presentation?(o(),r("a",{key:0,href:e(k)+t.value.presentation,target:"_blank"},[a(e(u),{class:"ml-4",type:"success"},{default:s(()=>[$]),_:1})],8,Y)):(o(),r("span",G,[a(e(u),{disabled:""},{default:s(()=>[J]),_:1})]))]),l("div",null,[t.value.draft_report?(o(),r("a",{key:0,href:e(k)+t.value.draft_report,target:"_blank"},[a(e(u),{class:"ml-4",type:"success"},{default:s(()=>[Q]),_:1})],8,K)):(o(),r("span",W,[a(e(u),{disabled:""},{default:s(()=>[X]),_:1})]))]),l("div",null,[t.value.final_report?(o(),r("a",{key:0,href:e(k)+t.value.final_report,target:"_blank"},[a(e(u),{class:"ml-4",type:"success"},{default:s(()=>[ee]),_:1})],8,Z)):(o(),r("span",te,[a(e(u),{disabled:""},{default:s(()=>[se]),_:1})]))])]),_:1})]),_:1})]),_:1})]),l("div",ae,[a(e(m),{vertical:!0},{default:s(()=>[e(x).role=="professor"&&e(x).id==t.value.supervisor_id?(o(),p(e(c),{key:0,title:"Action professeur"},{default:s(()=>[l("div",le,[t.value.valid_soutenance?(o(),p(e(u),{key:0,class:"w-full",type:"error",onClick:j},{default:s(()=>[oe]),_:1})):(o(),p(e(u),{key:1,class:"w-full",type:"success",onClick:V},{default:s(()=>[ne]),_:1}))]),a(e(U)),l("div",ie,[a(e(q),{class:"w-full",value:f.value,"onUpdate:value":d[0]||(d[0]=_=>f.value=_),min:0,max:20},{suffix:s(()=>[re]),_:1},8,["value"]),a(e(u),{class:"w-full xl:w-1/2",type:"success",onClick:A},{default:s(()=>[ce]),_:1})])]),_:1})):N("",!0),a(e(c),{title:"\xC9tat actuel"},{default:s(()=>[l("span",ue,"Valider pour la soutenance: "+n(t.value.valid_soutenance?"Oui":"Pas encore"),1),l("span",de,"Note: "+n(t.value.score?t.value.score+"/20":"Pas de note"),1)]),_:1}),a(e(c),{title:"Encadrant acad\xE9mique"},{default:s(()=>[t.value.supervisor?(o(),r("div",_e,[l("span",pe,n(t.value.supervisor.first_name)+" "+n(t.value.supervisor.last_name),1),l("span",ve,n(t.value.supervisor.email),1)])):(o(),r("div",fe,me))]),_:1}),a(e(c),{title:"Entreprise"},{default:s(()=>[l("p",ye,n(t.value.company.name),1),l("p",ke,n(t.value.company.city)+", "+n(t.value.company.phone),1)]),_:1}),a(e(c),{title:"Encadrant"},{default:s(()=>[l("span",xe,n(t.value.supervisor_name),1),l("span",ge,n(t.value.supervisor_phone),1)]),_:1})]),_:1})])])]),_:1})])):N("",!0)}});export{Ce as _};
