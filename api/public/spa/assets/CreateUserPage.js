import{e as h,m as y,U as N,A as U,l as A,M as C,W as S,o as f,c as w,w as n,q as l,u as r,x as M,f as a,p as j,y as p,t as i,O as d,s as u,P as K,S as R,v as B,z as P}from"./vendor.js";import{u as k}from"./UserApiService.js";import"./AbstractApiService.js";const z={class:"flex gap-8"},F={class:"flex gap-8"},V={class:"flex justify-end"},L=P("Ajouter"),W=h({setup(D){const v=k(),g=y(),x=N(),E=U(),c=[{label:"Administrateur",value:"admin"},{label:"Professeur",value:"professor"},{label:"\xC9tudiant",value:"student"}],b=A(null),t=C({first_name:"",last_name:"",email:"",password:"",password_confirmation:"",role:"",apogee:""}),q={first_name:{required:!0,trigger:["input","blur"],validator:(o,e)=>e?e.length>255?new Error("Pr\xE9nom ne doit pas depasser 255 charactere"):!0:new Error("Pr\xE9nom est requis")},last_name:{required:!0,trigger:["input","blur"],validator:(o,e)=>e?e.length>255?new Error("Nom ne doit pas depasser 255 charactere"):!0:new Error("Nom est requis")},email:{required:!0,trigger:["input","blur"],validator:(o,e)=>e?e.length>255?new Error("Email ne doit pas depasser 255 charactere"):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)?!0:new Error("veuillez entrer un email valide"):new Error("Email est requis")},role:{required:!0,trigger:["input","blur"],validator:(o,e)=>e?!0:new Error("Role est requis")},apogee:{required:!0,trigger:["input","blur"],validator:(o,e)=>t.role!="student"&&e?new Error("apogee n'est requis que si le r\xF4le est \xE9tudiant"):!e&&t.role=="student"?new Error("Role est requis pour \xE9tudiant"):!0},password:{required:!0,trigger:["input","blur"],validator:(o,e)=>e?e.length>255?new Error("Mot de passe ne doit pas depasser 255 charactere"):e.length<8?new Error("Mot de passe ne doit pas avoir mois de 8 charactere"):!0:new Error("Mot de passe est requis")},password_confirmation:{required:!0,trigger:["input","blur"],validator:(o,e)=>e?e!=t.password?new Error("Le mot de passe n'est pas le m\xEAme"):!0:new Error("La confirmation du mot de passe est requise")}},m=async()=>{try{await v.create(t),E.success("Utilisateur ajouter"),t.first_name="",t.last_name="",t.email="",t.role="",t.password="",t.apogee="",g.push({name:"auth.admin.users"})}catch(o){console.log(o)}};return S((o,e,s)=>{if(t.first_name.length!=0||t.last_name.length!=0||t.email.length!=0||t.role.length!=0||t.password.length!=0)x.error({title:"Donn\xE9es non enregistr\xE9es",content:"voulez-vous continuer sans enregistrer ?",positiveText:"Oui",onPositiveClick:()=>s()});else return s()}),(o,e)=>(f(),w(r(M),{title:"Ajouter un utilisateur",onSubmit:l(m,["prevent"])},{default:n(()=>[a(r(j),{model:r(t),ref:(s,_)=>{_.formRef=s,b.value=s},rules:q},{default:n(()=>[p("div",z,[a(r(u),{path:"first_name",label:"Pr\xE9nom",class:"w-1/2"},{default:n(()=>[a(r(i),{value:r(t).first_name,"onUpdate:value":e[0]||(e[0]=s=>r(t).first_name=s),onKeydown:e[1]||(e[1]=d(l(()=>{},["prevent"]),["enter"])),placeholder:"Mouad"},null,8,["value"])]),_:1}),a(r(u),{path:"last_name",label:"Nom",class:"w-1/2"},{default:n(()=>[a(r(i),{value:r(t).last_name,"onUpdate:value":e[2]||(e[2]=s=>r(t).last_name=s),onKeydown:e[3]||(e[3]=d(l(()=>{},["prevent"]),["enter"])),placeholder:"Benali"},null,8,["value"])]),_:1})]),a(r(u),{path:"email",label:"Email"},{default:n(()=>[a(r(i),{value:r(t).email,"onUpdate:value":e[4]||(e[4]=s=>r(t).email=s),onKeydown:e[5]||(e[5]=d(l(()=>{},["prevent"]),["enter"])),placeholder:"mouad.benali1@uit.ac.ma"},null,8,["value"])]),_:1}),a(r(u),{path:"role",label:"R\xF4le"},{default:n(()=>[a(r(K),{value:r(t).role,"onUpdate:value":e[6]||(e[6]=s=>r(t).role=s),options:c,placeholder:"\xC9tudiant"},null,8,["value"])]),_:1}),r(t).role=="student"?(f(),w(r(u),{key:0,path:"apogee",label:"Apogee"},{default:n(()=>[a(r(i),{value:r(t).apogee,"onUpdate:value":e[7]||(e[7]=s=>r(t).apogee=s),onKeydown:e[8]||(e[8]=d(l(()=>{},["prevent"]),["enter"])),placeholder:"xxxxxxxx"},null,8,["value"])]),_:1})):R("",!0),p("div",F,[a(r(u),{path:"password",label:"Mot de passe",class:"w-1/2"},{default:n(()=>[a(r(i),{value:r(t).password,"onUpdate:value":e[9]||(e[9]=s=>r(t).password=s),onKeydown:e[10]||(e[10]=d(l(()=>{},["prevent"]),["enter"])),type:"password",placeholder:"********"},null,8,["value"])]),_:1}),a(r(u),{path:"password_confirmation",label:"Confirmez le mot de passe",class:"w-1/2"},{default:n(()=>[a(r(i),{value:r(t).password_confirmation,"onUpdate:value":e[11]||(e[11]=s=>r(t).password_confirmation=s),onKeydown:e[12]||(e[12]=d(l(()=>{},["prevent"]),["enter"])),type:"password",placeholder:"********"},null,8,["value"])]),_:1})]),p("div",V,[a(r(B),{type:"success",onClick:m},{default:n(()=>[L]),_:1})])]),_:1},8,["model"])]),_:1},8,["onSubmit"]))}});export{W as default};
