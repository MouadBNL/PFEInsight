import{A as q}from"./AbstractApiService.js";import{e as _,A as k,l as m,F as w,o as f,c as y,w as l,f as r,u as a,s as d,t as p,v as b,p as L,x as j,z as x}from"./vendor.js";class F extends q{constructor(){super("/companies")}get(){return this.http.get("").then(this.handleResponse.bind(this)).catch(this.handleError.bind(this))}store(n){return this.http.post("",n).then(this.handleResponse.bind(this)).catch(this.handleError.bind(this))}update(n,i){return this.http.put("/"+n,i).then(this.handleResponse.bind(this)).catch(this.handleError.bind(this))}delete(n){return this.http.delete("/"+n).then(this.handleResponse.bind(this)).catch(this.handleError.bind(this))}}function R(){return new F}const S=x("Modifier"),U=x("Ajouter"),B=_({props:{init:null},emits:["created","updated"],setup(g,{emit:n}){const i=g,u=R(),c=k(),h=m(null),E={name:[{required:!0,message:"Le nom est requis",trigger:["input","blur"]}],address:[{required:!0,message:"L'adresse est requise",trigger:["input","blur"]}],city:[{required:!0,message:"La ville est requise",trigger:["input","blur"]}],phone:[{required:!0,message:"Le numero est requis",trigger:["input","blur"]}]},t=m({id:void 0,name:"",address:"",city:"",phone:""}),v=m(!1);w(()=>{i.init!=null&&i.init!=null&&(v.value=!0,t.value=i.init)});const A=o=>{o.preventDefault(),h.value.validate(async s=>{if(!s){const e=await u.store(t.value);c.success("entreprise ajout\xE9e avec succ\xE8s"),n("created",{value:e.data.id,label:e.data.name+" "+e.data.city,name:e.data.name,city:e.data.city})}})},N=o=>{o.preventDefault(),h.value.validate(async s=>{s||(t.value.id?(await u.update(t.value.id,t.value),c.success("entreprise modifier avec succ\xE8s"),n("updated")):c.success("une erreur s'est produite veuillez r\xE9essayer plus tard"))})};return(o,s)=>(f(),y(a(j),{title:v.value?"Modifier une entreprise":"Ajouter une entreprise",class:"w-1/2"},{default:l(()=>[r(a(L),{model:t.value,ref:(e,C)=>{C.companyForm=e,h.value=e},rules:E},{default:l(()=>[r(a(d),{path:"name",label:"Nom de l'entreprise"},{default:l(()=>[r(a(p),{value:t.value.name,"onUpdate:value":s[0]||(s[0]=e=>t.value.name=e),placeholder:"Nom de l'entreprise"},null,8,["value"])]),_:1}),r(a(d),{path:"address",label:"Adresse"},{default:l(()=>[r(a(p),{value:t.value.address,"onUpdate:value":s[1]||(s[1]=e=>t.value.address=e),placeholder:"Adresse"},null,8,["value"])]),_:1}),r(a(d),{path:"city",label:"Ville"},{default:l(()=>[r(a(p),{value:t.value.city,"onUpdate:value":s[2]||(s[2]=e=>t.value.city=e),placeholder:"Ville"},null,8,["value"])]),_:1}),r(a(d),{path:"phone",label:"Num\xE9ro de t\xE9l\xE9phone"},{default:l(()=>[r(a(p),{value:t.value.phone,"onUpdate:value":s[3]||(s[3]=e=>t.value.phone=e),placeholder:"Num\xE9ro de t\xE9l\xE9phone"},null,8,["value"])]),_:1}),v.value?(f(),y(a(b),{key:0,type:"success",onClick:N,loading:a(u).isLoading.value},{default:l(()=>[S]),_:1},8,["loading"])):(f(),y(a(b),{key:1,type:"success",onClick:A,loading:a(u).isLoading.value},{default:l(()=>[U]),_:1},8,["loading"]))]),_:1},8,["model"])]),_:1},8,["title"]))}});export{B as _,R as u};
