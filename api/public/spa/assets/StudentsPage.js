import{b as L}from"./AbstractApiService.js";import{u as f}from"./StudentApiService.js";import{e as _,A as m,m as v,U as g,l as x,F as C,o as S,n as y,y as r,f as s,u as n,R as b,w as a,v as o,x as k,T as E,X as M,V as N,z as u,D as i,r as A}from"./vendor.js";const V={class:"flex items-center py-4"},Z=u("Tous les \xC9tudiants"),B=r("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"50",height:"50",viewBox:"0 0 50 50",style:{fill:"#FFF"}},[r("path",{d:"M 28.8125 0.03125 L 0.8125 5.34375 C 0.339844 5.433594 0 5.863281 0 6.34375 L 0 43.65625 C 0 44.136719 0.339844 44.566406 0.8125 44.65625 L 28.8125 49.96875 C 28.875 49.980469 28.9375 50 29 50 C 29.230469 50 29.445313 49.929688 29.625 49.78125 C 29.855469 49.589844 30 49.296875 30 49 L 30 1 C 30 0.703125 29.855469 0.410156 29.625 0.21875 C 29.394531 0.0273438 29.105469 -0.0234375 28.8125 0.03125 Z M 32 6 L 32 13 L 34 13 L 34 15 L 32 15 L 32 20 L 34 20 L 34 22 L 32 22 L 32 27 L 34 27 L 34 29 L 32 29 L 32 35 L 34 35 L 34 37 L 32 37 L 32 44 L 47 44 C 48.101563 44 49 43.101563 49 42 L 49 8 C 49 6.898438 48.101563 6 47 6 Z M 36 13 L 44 13 L 44 15 L 36 15 Z M 6.6875 15.6875 L 11.8125 15.6875 L 14.5 21.28125 C 14.710938 21.722656 14.898438 22.265625 15.0625 22.875 L 15.09375 22.875 C 15.199219 22.511719 15.402344 21.941406 15.6875 21.21875 L 18.65625 15.6875 L 23.34375 15.6875 L 17.75 24.9375 L 23.5 34.375 L 18.53125 34.375 L 15.28125 28.28125 C 15.160156 28.054688 15.035156 27.636719 14.90625 27.03125 L 14.875 27.03125 C 14.8125 27.316406 14.664063 27.761719 14.4375 28.34375 L 11.1875 34.375 L 6.1875 34.375 L 12.15625 25.03125 Z M 36 20 L 44 20 L 44 22 L 36 22 Z M 36 27 L 44 27 L 44 29 L 36 29 Z M 36 35 L 44 35 L 44 37 L 36 37 Z"})],-1),F=u(" Exporter Excel "),I=_({setup(R){m();const l=f(),d=v();g();const h=[{title:"Apogee",key:"apogee",sorter:"default"},{title:"Pr\xE9nom",key:"first_name",sorter:"default"},{title:"Nom",key:"last_name",sorter:"default"},{title:"Email",key:"email",sorter:"default"},{title:"Stage",key:"internship",filterOptions:[{label:"Avec stage et encadrant",value:"with"},{label:"Sans Encadrant",value:"withoutSup"},{label:"Sans stage",value:"without"}],filter(e,t){if(e=="without")return!t.internship||!t.internship.id;if(e=="withoutSup")return!(!t.internship||!t.internship.id)&&!t.internship.supervisor_id;if(e=="with")return!(!t.internship||!t.internship.id)&&t.internship.supervisor_id},render(e){return!e.internship||!e.internship.id?i("span",{},["Sans stage"]):i(A("router-link"),{to:{name:"auth.internship.show",params:{id:e.internship.id}},class:"text-green-700 bg-green-50 px-4 py-2 rounded"},{default:()=>"Voir le stage"})}},{title:"Rpport",key:"rapprt",filterOptions:[{label:"Les deux rapport",value:2},{label:"Le premi\xE8r rapport",value:1},{label:"Sans rapport",value:0}],filter(e,t){if(e==2)return t.internship&&t.internship.draft_report&&t.internship.final_report;if(e==1)return t.internship&&t.internship.draft_report&&!t.internship.final_report;if(e==0)return t.internship&&!t.internship.draft_report&&!t.internship.final_report},render(e){return!e.internship||!e.internship.id?i("span",{},["Sans stage"]):i("span",{},[e.internship.draft_report?e.internship.final_report?"Les deux rapport":"Le premi\xE8r rapport":"Sans Rapport"])}},{title:"Soutenance",key:"soutenance",filterOptions:[{label:"Valide",value:"valid"},{label:"Invalide",value:"invalid"}],filter(e,t){if(e=="invalid"&&!(t.internship&&t.internship.valid_soutenance==1)||e=="valid"&&t.internship&&t.internship.valid_soutenance==1)return!0},render(e){return i("span",{},[e.internship&&e.internship.valid_soutenance?"Valide":"Invalide"])}},{title:"Actions",key:"actions",render(e){return i(o,{type:"success",onClick:()=>{d.push({name:"auth.admin.students.show",params:{id:e.id}})}},{default:()=>"Profile"})}}],p=x([]);C(async()=>{let e=await l.getAllStudents();p.value=e.data});const c=()=>{window.open(L+"students/export","_blank")};return(e,t)=>(S(),y(E,null,[r("div",V,[s(n(b),{class:"m-0 p-0"},{default:a(()=>[Z]),_:1}),s(n(o),{type:"success",class:"ml-4",onClick:c},{icon:a(()=>[s(n(M),null,{default:a(()=>[B]),_:1})]),default:a(()=>[F]),_:1})]),s(n(k),null,{default:a(()=>[s(n(N),{columns:h,data:p.value,pagination:{pageSize:20},loading:n(l).isLoading.value},null,8,["data","loading"])]),_:1})],64))}});export{I as default};
